# =============================================================================
# WhatsApp Multi-Session REST API - Environment Configuration
# =============================================================================
#
# Variables marked [REQUIRED] must be set - application will fail without them.
# Variables marked [OPTIONAL] have sensible defaults and can be omitted.
#
# =============================================================================

# -----------------------------------
# Server Configuration [OPTIONAL]
# -----------------------------------
# SERVER_ADDRESS: Bind address (default: 0.0.0.0)
SERVER_ADDRESS=0.0.0.0

# SERVER_PORT: HTTP port (default: 7001)
SERVER_PORT=7001

# -----------------------------------
# HTTP Configuration [OPTIONAL]
# -----------------------------------
# HTTP_BASE_URL: API path prefix (default: empty, no prefix)
HTTP_BASE_URL=

# HTTP_CORS_ORIGIN: CORS allowed origins (default: * = all)
# HTTP_CORS_ORIGIN=*

# HTTP_BODY_LIMIT_SIZE: Max request body size (default: 8M)
# HTTP_BODY_LIMIT_SIZE=8m

# HTTP_GZIP_LEVEL: Compression level 1-9 (default: 1)
# HTTP_GZIP_LEVEL=1

# HTTP_CACHE_CAPACITY: In-memory cache max entries (default: 100)
# HTTP_CACHE_CAPACITY=100

# HTTP_CACHE_TTL_SECONDS: Cache TTL in seconds (default: 5)
# HTTP_CACHE_TTL_SECONDS=5

# -----------------------------------
# Authentication Configuration [REQUIRED]
# -----------------------------------
# ADMIN_SECRET_KEY: Secret for /admin/* endpoints [REQUIRED]
# Generate with: openssl rand -base64 32
ADMIN_SECRET_KEY=ThisIsAdminSecretKey

# JWT_SECRET_KEY: JWT signing key, min 32 chars [REQUIRED]
# Generate with: openssl rand -base64 32
JWT_SECRET_KEY=YourSuperSecretJWTKeyAtLeast32CharsLong

# -----------------------------------
# WhatsApp Configuration
# -----------------------------------
# WHATSAPP_DATASTORE_TYPE: Database type (default: postgres) [OPTIONAL]
WHATSAPP_DATASTORE_TYPE=postgres

# WHATSAPP_DATASTORE_URI: Database connection string [REQUIRED]
WHATSAPP_DATASTORE_URI=postgres://whatsapp:secret@localhost:5432/whatsapp?sslmode=disable

# WHATSAPP_KEYS_DATASTORE_URI: Separate DB for encryption keys [OPTIONAL]
WHATSAPP_KEYS_DATASTORE_URI=

# WHATSAPP_CLIENT_PROXY_URL: Proxy for WhatsApp connections [OPTIONAL]
WHATSAPP_CLIENT_PROXY_URL=

# Media handling [OPTIONAL - defaults shown]
WHATSAPP_MEDIA_IMAGE_COMPRESSION=true
WHATSAPP_MEDIA_IMAGE_CONVERT_WEBP=true

# Presence & typing simulation (anti-detection) [OPTIONAL - defaults shown]
WHATSAPP_AUTO_PRESENCE_ENABLED=true
WHATSAPP_AUTO_TYPING_ENABLED=true
WHATSAPP_TYPING_DELAY_MIN=1s
WHATSAPP_TYPING_DELAY_MAX=3s

# Read receipt jitter (anti-detection) [OPTIONAL - defaults shown]
WHATSAPP_READ_RECEIPT_JITTER_ENABLED=true
WHATSAPP_READ_RECEIPT_DELAY_MIN=500ms
WHATSAPP_READ_RECEIPT_DELAY_MAX=2s

# App state webhook toggle [OPTIONAL - default: false]
WHATSAPP_APPSTATE_WEBHOOK_ENABLED=false

# Rate limiting [OPTIONAL - disabled by default]
WHATSAPP_RATE_LIMIT_ENABLED=false
WHATSAPP_RATE_LIMIT_MSG_PER_MINUTE=20
WHATSAPP_RATE_LIMIT_BURST_SIZE=5

# WA Web version override [OPTIONAL - uses auto-detected if not set]
# WHATSAPP_VERSION_MAJOR=2
# WHATSAPP_VERSION_MINOR=3000
# WHATSAPP_VERSION_PATCH=1019175440

# WA Web version refresh throttle [OPTIONAL - default: 10m]
# WHATSAPP_WAVERSION_REFRESH_MIN_INTERVAL=10m

# Startup reconnect storm protection [OPTIONAL - defaults shown]
# Recommended for deployments with 100+ sessions
# WHATSAPP_STARTUP_RECONNECT_CONCURRENCY=10
# WHATSAPP_STARTUP_RECONNECT_JITTER_MAX=5s
# WHATSAPP_STARTUP_RECONNECT_RETRIES=3
# WHATSAPP_STARTUP_RECONNECT_BACKOFF_BASE=2s
# WHATSAPP_STARTUP_RECONNECT_BACKOFF_MAX=30s

# Scheduled WA Web version refresh [OPTIONAL - disabled by default]
# Cron format with seconds: "sec min hour day month weekday"
# WHATSAPP_ENABLE_WAVERSION_REFRESH_CRON=false
# WHATSAPP_WAVERSION_REFRESH_CRON_SPEC=0 0 3 * * *
# WHATSAPP_WAVERSION_REFRESH_CRON_FORCE=false

# -----------------------------------
# 3rd Party Configuration [OPTIONAL]
# -----------------------------------
LIBWEBP_VERSION=0.6.1

# -----------------------------------
# Webhook Configuration [OPTIONAL - defaults shown]
# -----------------------------------
WEBHOOKS_ENABLED=true
WEBHOOK_WORKERS=4
WEBHOOK_RETRY_LIMIT=3
WEBHOOK_MAX_PER_DEVICE=5
