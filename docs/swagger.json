{
  "swagger": "2.0",
  "info": {
    "title": "WhatsApp Multi-Device REST API",
    "description": "Enterprise-grade RESTful API for WhatsApp Multi-Device and Multi-Session implementation.\n\n## Authentication\n\nThis API uses a **3-tier authentication system**:\n\n### 1. Admin Authentication (X-Admin-Secret)\nFor managing API keys and system administration.\n```\nX-Admin-Secret: your-admin-secret\n```\n\n### 2. API Key Authentication (X-API-Key)\nFor creating devices. Each API key can create up to `max_devices` devices.\n```\nX-API-Key: ak_xxxxxxxxxxxxxxxx\n```\n\n### 3. JWT Bearer Token (Authorization)\nFor all device operations. Obtained when creating a device.\n```\nAuthorization: Bearer eyJhbGciOiJIUzI1NiIs...\n```\n\n## Quick Start\n\n1. **Admin creates API Key** ‚Üí `POST /admin/api-keys`\n2. **Customer creates Device** ‚Üí `POST /devices` (returns JWT)\n3. **Customer uses JWT** ‚Üí All `/devices/me/*` endpoints\n\n## Features\n\n- 60+ endpoints for complete WhatsApp automation\n- JWT tokens with no expiry (regenerate anytime)\n- Multi-tenant support via API keys\n- Webhook integration for real-time events",
    "version": "2.0.0",
    "contact": {
      "name": "API Support",
      "url": "https://github.com/gdbrns/go-whatsapp-multi-session-rest-api"
    }
  },
  "host": "localhost:7001",
  "basePath": "/",
  "schemes": ["http", "https"],
  "consumes": ["application/json"],
  "produces": ["application/json"],
  "securityDefinitions": {
    "AdminAuth": {
      "type": "apiKey",
      "name": "X-Admin-Secret",
      "in": "header",
      "description": "Admin secret key for managing API keys. Set in .env as ADMIN_SECRET"
    },
    "APIKeyAuth": {
      "type": "apiKey",
      "name": "X-API-Key",
      "in": "header",
      "description": "API key for creating devices. Format: ak_xxxxxxxxxxxxxxxx"
    },
    "BearerAuth": {
      "type": "apiKey",
      "name": "Authorization",
      "in": "header",
      "description": "JWT Bearer token for device operations. Format: Bearer <jwt_token>"
    }
  },
  "tags": [
    {"name": "00 - Health", "description": "Server status and health check"},
    {"name": "01 - Documentation", "description": "API documentation and Swagger UI"},
    {"name": "02 - Admin", "description": "API key management (Admin only)"},
    {"name": "03 - Device Registration", "description": "Create devices and manage JWT tokens"},
    {"name": "04 - Device Operations", "description": "Login, logout, status, and reconnection"},
    {"name": "05 - User Management", "description": "User profiles, privacy settings, and contacts"},
    {"name": "06 - Messaging", "description": "Send text, images, documents"},
    {"name": "07 - Message Actions", "description": "Read, react, edit, delete, reply to messages"},
    {"name": "08 - Group Management", "description": "Create, manage, and administer WhatsApp groups"},
    {"name": "09 - Presence & Status", "description": "Typing indicators, online status, disappearing messages"},
    {"name": "10 - App State", "description": "App state synchronization"},
    {"name": "11 - Webhooks", "description": "Webhook configuration and management"}
  ],
  "definitions": {
    "ErrorResponse": {
      "type": "object",
      "properties": {
        "status": {"type": "boolean", "example": false},
        "code": {"type": "integer", "example": 400},
        "message": {"type": "string", "example": "Bad request"}
      }
    },
    "SuccessResponse": {
      "type": "object",
      "properties": {
        "status": {"type": "boolean", "example": true},
        "code": {"type": "integer", "example": 200},
        "message": {"type": "string", "example": "Success"},
        "data": {"type": "object"}
      }
    },
    "APIKey": {
      "type": "object",
      "properties": {
        "id": {"type": "integer", "example": 1},
        "api_key": {"type": "string", "example": "ak_a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6"},
        "customer_name": {"type": "string", "example": "Acme Corp"},
        "customer_email": {"type": "string", "example": "admin@acme.com"},
        "max_devices": {"type": "integer", "example": 10},
        "rate_limit_per_hour": {"type": "integer", "example": 1000},
        "is_active": {"type": "boolean", "example": true}
      }
    },
    "Device": {
      "type": "object",
      "properties": {
        "device_id": {"type": "string", "example": "550e8400-e29b-41d4-a716-446655440000"},
        "device_name": {"type": "string", "example": "Production Phone"},
        "whatsmeow_jid": {"type": "string", "example": "6281234567890@s.whatsapp.net"},
        "status": {"type": "string", "example": "connected"},
        "token": {"type": "string", "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."}
      }
    },
    "JWTClaims": {
      "type": "object",
      "properties": {
        "device_id": {"type": "string", "example": "550e8400-e29b-41d4-a716-446655440000"},
        "api_key_id": {"type": "integer", "example": 1},
        "jid": {"type": "string", "example": "6281234567890@s.whatsapp.net"},
        "version": {"type": "integer", "example": 1, "description": "JWT version for invalidation"}
      }
    }
  },
  "paths": {
    "/": {
      "get": {
        "tags": ["00 - Health"],
        "summary": "Server Status",
        "description": "Get server status and health check. No authentication required.",
        "responses": {
          "200": {
            "description": "Server is running",
            "schema": {
              "type": "object",
              "properties": {
                "status": {"type": "boolean", "example": true},
                "code": {"type": "integer", "example": 200},
                "message": {"type": "string", "example": "Working great!"}
              }
            }
          }
        }
      }
    },
    "/docs/swagger.json": {
      "get": {
        "tags": ["01 - Documentation"],
        "summary": "OpenAPI Specification (JSON)",
        "description": "Get OpenAPI/Swagger documentation in JSON format",
        "produces": ["application/json"],
        "responses": {"200": {"description": "Swagger JSON documentation"}}
      }
    },
    "/docs/swagger.yaml": {
      "get": {
        "tags": ["01 - Documentation"],
        "summary": "OpenAPI Specification (YAML)",
        "description": "Get OpenAPI/Swagger documentation in YAML format",
        "produces": ["application/yaml"],
        "responses": {"200": {"description": "Swagger YAML documentation"}}
      }
    },
    "/docs/*": {
      "get": {
        "tags": ["01 - Documentation"],
        "summary": "Swagger UI",
        "description": "Interactive API documentation interface",
        "responses": {"200": {"description": "Swagger UI HTML"}}
      }
    },
    "/admin/api-keys": {
      "post": {
        "security": [{"AdminAuth": []}],
        "tags": ["02 - Admin"],
        "summary": "Create API Key",
        "description": "Create a new API key for a customer. The API key is only shown once in the response - save it securely!",
        "consumes": ["application/json"],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": ["customer_name"],
              "properties": {
                "customer_name": {"type": "string", "example": "Acme Corp", "description": "Customer/company name"},
                "customer_email": {"type": "string", "example": "admin@acme.com", "description": "Contact email (optional)"},
                "max_devices": {"type": "integer", "example": 10, "default": 5, "description": "Maximum devices this key can create"},
                "rate_limit_per_hour": {"type": "integer", "example": 5000, "default": 1000, "description": "API rate limit per hour"}
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "API key created successfully",
            "schema": {
              "type": "object",
              "properties": {
                "status": {"type": "boolean", "example": true},
                "code": {"type": "integer", "example": 201},
                "message": {"type": "string", "example": "API key created successfully"},
                "data": {
                  "type": "object",
                  "properties": {
                    "id": {"type": "integer", "example": 1},
                    "api_key": {"type": "string", "example": "ak_a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6", "description": "Save this! Only shown once"},
                    "customer_name": {"type": "string", "example": "Acme Corp"},
                    "max_devices": {"type": "integer", "example": 10}
                  }
                }
              }
            }
          },
          "401": {"description": "Unauthorized - Invalid admin secret", "schema": {"$ref": "#/definitions/ErrorResponse"}}
        }
      },
      "get": {
        "security": [{"AdminAuth": []}],
        "tags": ["02 - Admin"],
        "summary": "List All API Keys",
        "description": "Get list of all API keys (keys are masked for security)",
        "responses": {
          "200": {
            "description": "API keys retrieved",
            "schema": {
              "type": "object",
              "properties": {
                "status": {"type": "boolean", "example": true},
                "data": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {"type": "integer", "example": 1},
                      "api_key_masked": {"type": "string", "example": "ak_a1b2...o5p6"},
                      "customer_name": {"type": "string", "example": "Acme Corp"},
                      "device_count": {"type": "integer", "example": 3},
                      "max_devices": {"type": "integer", "example": 10},
                      "is_active": {"type": "boolean", "example": true}
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/admin/api-keys/{id}": {
      "get": {
        "security": [{"AdminAuth": []}],
        "tags": ["02 - Admin"],
        "summary": "Get API Key Details",
        "description": "Get detailed information about a specific API key including its devices",
        "parameters": [
          {"name": "id", "in": "path", "required": true, "type": "integer", "description": "API Key ID"}
        ],
        "responses": {
          "200": {"description": "API key details retrieved"},
          "404": {"description": "API key not found", "schema": {"$ref": "#/definitions/ErrorResponse"}}
        }
      },
      "patch": {
        "security": [{"AdminAuth": []}],
        "tags": ["02 - Admin"],
        "summary": "Update API Key",
        "description": "Update API key settings (name, limits, active status)",
        "parameters": [
          {"name": "id", "in": "path", "required": true, "type": "integer"},
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "customer_name": {"type": "string"},
                "customer_email": {"type": "string"},
                "max_devices": {"type": "integer"},
                "rate_limit_per_hour": {"type": "integer"},
                "is_active": {"type": "boolean", "description": "Set to false to disable all requests with this key"}
              }
            }
          }
        ],
        "responses": {
          "200": {"description": "API key updated successfully"}
        }
      },
      "delete": {
        "security": [{"AdminAuth": []}],
        "tags": ["02 - Admin"],
        "summary": "Delete API Key",
        "description": "Delete an API key and ALL its associated devices. This action is irreversible!",
        "parameters": [
          {"name": "id", "in": "path", "required": true, "type": "integer"}
        ],
        "responses": {
          "200": {"description": "API key deleted successfully"}
        }
      }
    },
    "/admin/api-keys/{id}/devices": {
      "get": {
        "security": [{"AdminAuth": []}],
        "tags": ["02 - Admin"],
        "summary": "List Devices by API Key",
        "description": "Get all devices created with a specific API key",
        "parameters": [
          {"name": "id", "in": "path", "required": true, "type": "integer", "description": "API Key ID"}
        ],
        "responses": {
          "200": {"description": "Devices retrieved"}
        }
      }
    },
    "/admin/devices/{device_id}": {
      "delete": {
        "security": [{"AdminAuth": []}],
        "tags": ["02 - Admin"],
        "summary": "Delete Device (Admin)",
        "description": "Admin can delete any device by ID",
        "parameters": [
          {"name": "device_id", "in": "path", "required": true, "type": "string", "description": "Device UUID"}
        ],
        "responses": {
          "200": {"description": "Device deleted successfully"}
        }
      }
    },
    "/devices": {
      "post": {
        "security": [{"APIKeyAuth": []}],
        "tags": ["03 - Device Registration"],
        "summary": "Create Device",
        "description": "Create a new device and receive a JWT token. This token is used for all subsequent device operations.\n\n**Important:** Save the JWT token securely - it provides access to all device operations.",
        "consumes": ["application/json"],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "device_name": {"type": "string", "example": "Production Phone", "description": "Friendly name for the device"}
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Device created successfully",
            "schema": {
              "type": "object",
              "properties": {
                "status": {"type": "boolean", "example": true},
                "code": {"type": "integer", "example": 201},
                "message": {"type": "string", "example": "Device created successfully"},
                "data": {
                  "type": "object",
                  "properties": {
                    "device_id": {"type": "string", "example": "550e8400-e29b-41d4-a716-446655440000"},
                    "device_name": {"type": "string", "example": "Production Phone"},
                    "token": {"type": "string", "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...", "description": "Save this JWT token!"}
                  }
                }
              }
            }
          },
          "400": {"description": "Device limit reached for this API key"},
          "401": {"description": "Invalid API key"}
        }
      }
    },
    "/devices/token": {
      "post": {
        "tags": ["03 - Device Registration"],
        "summary": "Regenerate JWT Token",
        "description": "Regenerate JWT token for a device. This invalidates all previous tokens for this device.\n\n**Use case:** If a token is compromised, regenerate to revoke access.",
        "consumes": ["application/json"],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": ["device_id", "api_key"],
              "properties": {
                "device_id": {"type": "string", "example": "550e8400-e29b-41d4-a716-446655440000"},
                "api_key": {"type": "string", "example": "ak_a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6", "description": "The API key that created this device"}
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Token regenerated successfully",
            "schema": {
              "type": "object",
              "properties": {
                "status": {"type": "boolean", "example": true},
                "message": {"type": "string", "example": "Token regenerated successfully"},
                "data": {
                  "type": "object",
                  "properties": {
                    "device_id": {"type": "string"},
                    "token": {"type": "string", "description": "New JWT token (old tokens are now invalid)"}
                  }
                }
              }
            }
          }
        }
      }
    },
    "/devices/me": {
      "get": {
        "security": [{"BearerAuth": []}],
        "tags": ["04 - Device Operations"],
        "summary": "Get Current Device Info",
        "description": "Get information about the current device (from JWT token)",
        "responses": {
          "200": {
            "description": "Device info retrieved",
            "schema": {
              "type": "object",
              "properties": {
                "status": {"type": "boolean", "example": true},
                "data": {
                  "type": "object",
                  "properties": {
                    "device_id": {"type": "string"},
                    "device_name": {"type": "string"},
                    "whatsmeow_jid": {"type": "string"},
                    "status": {"type": "string"}
                  }
                }
              }
            }
          }
        }
      }
    },
    "/devices/me/status": {
      "get": {
        "security": [{"BearerAuth": []}],
        "tags": ["04 - Device Operations"],
        "summary": "Get Device Connection Status",
        "description": "Check if the device is connected to WhatsApp",
        "responses": {
          "200": {
            "description": "Status retrieved",
            "schema": {
              "type": "object",
              "properties": {
                "data": {
                  "type": "object",
                  "properties": {
                    "connected": {"type": "boolean", "example": true}
                  }
                }
              }
            }
          }
        }
      }
    },
    "/devices/me/login": {
      "post": {
        "security": [{"BearerAuth": []}],
        "tags": ["04 - Device Operations"],
        "summary": "Login with QR Code",
        "description": "Generate QR code for WhatsApp login. Scan with WhatsApp app.",
        "consumes": ["application/x-www-form-urlencoded"],
        "parameters": [
          {"name": "output", "in": "formData", "type": "string", "enum": ["html", "json"], "default": "json", "description": "Response format"}
        ],
        "responses": {
          "200": {
            "description": "QR code generated",
            "schema": {
              "type": "object",
              "properties": {
                "data": {
                  "type": "object",
                  "properties": {
                    "qr_code": {"type": "string", "example": "data:image/png;base64,..."},
                    "timeout": {"type": "integer", "example": 60}
                  }
                }
              }
            }
          }
        }
      }
    },
    "/devices/me/login-code": {
      "post": {
        "security": [{"BearerAuth": []}],
        "tags": ["04 - Device Operations"],
        "summary": "Login with Pairing Code",
        "description": "Generate pairing code for WhatsApp login (no QR scan needed). Enter the code in WhatsApp > Linked Devices > Link with phone number.",
        "consumes": ["application/json"],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": ["phone"],
              "properties": {
                "phone": {"type": "string", "example": "6281234567890", "description": "Phone number without + or spaces"}
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Pairing code generated",
            "schema": {
              "type": "object",
              "properties": {
                "data": {
                  "type": "object",
                  "properties": {
                    "pair_code": {"type": "string", "example": "ABCD-1234"},
                    "timeout": {"type": "integer", "example": 120}
                  }
                }
              }
            }
          }
        }
      }
    },
    "/devices/me/reconnect": {
      "post": {
        "security": [{"BearerAuth": []}],
        "tags": ["04 - Device Operations"],
        "summary": "Reconnect Device",
        "description": "Manually reconnect a disconnected device to WhatsApp",
        "responses": {
          "200": {"description": "Device reconnected"}
        }
      }
    },
    "/devices/me/session": {
      "delete": {
        "security": [{"BearerAuth": []}],
        "tags": ["04 - Device Operations"],
        "summary": "Logout Device",
        "description": "Logout from WhatsApp and remove the session. You'll need to scan QR again.",
        "responses": {
          "200": {"description": "Device logged out"}
        }
      }
    },
    "/devices/me/contacts/{phone}/registered": {
      "get": {
        "security": [{"BearerAuth": []}],
        "tags": ["04 - Device Operations"],
        "summary": "Check WhatsApp Registration",
        "description": "Check if a phone number is registered on WhatsApp",
        "parameters": [
          {"name": "phone", "in": "path", "required": true, "type": "string", "example": "6281234567890"}
        ],
        "responses": {
          "200": {
            "description": "Registration status",
            "schema": {
              "type": "object",
              "properties": {
                "data": {
                  "type": "object",
                  "properties": {
                    "is_registered": {"type": "boolean", "example": true},
                    "jid": {"type": "string", "example": "6281234567890@s.whatsapp.net"}
                  }
                }
              }
            }
          }
        }
      }
    },
    "/users/{user_jid}": {
      "get": {
        "security": [{"BearerAuth": []}],
        "tags": ["05 - User Management"],
        "summary": "Get User Info",
        "description": "Get user profile information by JID",
        "parameters": [
          {"name": "user_jid", "in": "path", "required": true, "type": "string", "example": "6281234567890@s.whatsapp.net"}
        ],
        "responses": {"200": {"description": "User info retrieved"}}
      }
    },
    "/users/{user_jid}/profile-picture": {
      "get": {
        "security": [{"BearerAuth": []}],
        "tags": ["05 - User Management"],
        "summary": "Get Profile Picture",
        "description": "Get user's profile picture URL",
        "parameters": [
          {"name": "user_jid", "in": "path", "required": true, "type": "string"}
        ],
        "responses": {"200": {"description": "Profile picture URL retrieved"}}
      }
    },
    "/users/{user_jid}/block": {
      "post": {
        "security": [{"BearerAuth": []}],
        "tags": ["05 - User Management"],
        "summary": "Block User",
        "parameters": [{"name": "user_jid", "in": "path", "required": true, "type": "string"}],
        "responses": {"200": {"description": "User blocked"}}
      },
      "delete": {
        "security": [{"BearerAuth": []}],
        "tags": ["05 - User Management"],
        "summary": "Unblock User",
        "parameters": [{"name": "user_jid", "in": "path", "required": true, "type": "string"}],
        "responses": {"200": {"description": "User unblocked"}}
      }
    },
    "/users/me/privacy": {
      "get": {
        "security": [{"BearerAuth": []}],
        "tags": ["05 - User Management"],
        "summary": "Get Privacy Settings",
        "responses": {"200": {"description": "Privacy settings retrieved"}}
      },
      "patch": {
        "security": [{"BearerAuth": []}],
        "tags": ["05 - User Management"],
        "summary": "Update Privacy Settings",
        "consumes": ["application/json"],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "setting": {"type": "string", "enum": ["last_seen", "profile_picture", "status", "read_receipts", "groups"]},
                "value": {"type": "string", "enum": ["all", "contacts", "contact_blacklist", "none"]}
              }
            }
          }
        ],
        "responses": {"200": {"description": "Privacy updated"}}
      }
    },
    "/users/me/status-privacy": {
      "get": {
        "security": [{"BearerAuth": []}],
        "tags": ["05 - User Management"],
        "summary": "Get Status Privacy",
        "responses": {"200": {"description": "Status privacy retrieved"}}
      }
    },
    "/users/me/status": {
      "post": {
        "security": [{"BearerAuth": []}],
        "tags": ["05 - User Management"],
        "summary": "Update About Status",
        "consumes": ["application/json"],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "status": {"type": "string", "example": "Available"}
              }
            }
          }
        ],
        "responses": {"200": {"description": "Status updated"}}
      }
    },
    "/users/{jid}/devices": {
      "get": {
        "security": [{"BearerAuth": []}],
        "tags": ["05 - User Management"],
        "summary": "Get User's Linked Devices",
        "parameters": [{"name": "jid", "in": "path", "required": true, "type": "string"}],
        "responses": {"200": {"description": "Linked devices retrieved"}}
      }
    },
    "/chats/{chat_jid}/messages": {
      "post": {
        "security": [{"BearerAuth": []}],
        "tags": ["06 - Messaging"],
        "summary": "Send Text Message",
        "description": "Send a text message to a chat or group",
        "consumes": ["application/json"],
        "parameters": [
          {"name": "chat_jid", "in": "path", "required": true, "type": "string", "example": "6281234567890@s.whatsapp.net"},
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": ["text"],
              "properties": {
                "text": {"type": "string", "example": "Hello, World!"},
                "reply_to_message_id": {"type": "string", "description": "Message ID to reply to"}
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Message sent",
            "schema": {
              "type": "object",
              "properties": {
                "data": {
                  "type": "object",
                  "properties": {
                    "message_id": {"type": "string", "example": "BAE1234567890ABCDEF"}
                  }
                }
              }
            }
          }
        }
      },
      "get": {
        "security": [{"BearerAuth": []}],
        "tags": ["06 - Messaging"],
        "summary": "Get Chat Messages",
        "parameters": [
          {"name": "chat_jid", "in": "path", "required": true, "type": "string"},
          {"name": "limit", "in": "query", "type": "integer", "default": 50},
          {"name": "before", "in": "query", "type": "string"},
          {"name": "after", "in": "query", "type": "string"}
        ],
        "responses": {"200": {"description": "Messages retrieved"}}
      }
    },
    "/chats/{chat_jid}/images": {
      "post": {
        "security": [{"BearerAuth": []}],
        "tags": ["06 - Messaging"],
        "summary": "Send Image",
        "consumes": ["multipart/form-data"],
        "parameters": [
          {"name": "chat_jid", "in": "path", "required": true, "type": "string"},
          {"name": "file", "in": "formData", "required": true, "type": "file"},
          {"name": "caption", "in": "formData", "type": "string"},
          {"name": "view_once", "in": "formData", "type": "boolean", "default": false}
        ],
        "responses": {"200": {"description": "Image sent"}}
      }
    },
    "/chats/{chat_jid}/documents": {
      "post": {
        "security": [{"BearerAuth": []}],
        "tags": ["06 - Messaging"],
        "summary": "Send Document",
        "consumes": ["multipart/form-data"],
        "parameters": [
          {"name": "chat_jid", "in": "path", "required": true, "type": "string"},
          {"name": "file", "in": "formData", "required": true, "type": "file"},
          {"name": "filename", "in": "formData", "type": "string"}
        ],
        "responses": {"200": {"description": "Document sent"}}
      }
    },
    "/chats/{chat_jid}/archive": {
      "post": {
        "security": [{"BearerAuth": []}],
        "tags": ["06 - Messaging"],
        "summary": "Archive/Unarchive Chat",
        "consumes": ["application/json"],
        "parameters": [
          {"name": "chat_jid", "in": "path", "required": true, "type": "string"},
          {"name": "body", "in": "body", "schema": {"type": "object", "properties": {"archive": {"type": "boolean"}}}}
        ],
        "responses": {"200": {"description": "Chat archived/unarchived"}}
      }
    },
    "/chats/{chat_jid}/pin": {
      "post": {
        "security": [{"BearerAuth": []}],
        "tags": ["06 - Messaging"],
        "summary": "Pin/Unpin Chat",
        "consumes": ["application/json"],
        "parameters": [
          {"name": "chat_jid", "in": "path", "required": true, "type": "string"},
          {"name": "body", "in": "body", "schema": {"type": "object", "properties": {"pin": {"type": "boolean"}}}}
        ],
        "responses": {"200": {"description": "Chat pinned/unpinned"}}
      }
    },
    "/messages/{message_id}/read": {
      "post": {
        "security": [{"BearerAuth": []}],
        "tags": ["07 - Message Actions"],
        "summary": "Mark Message as Read",
        "consumes": ["application/json"],
        "parameters": [
          {"name": "message_id", "in": "path", "required": true, "type": "string"},
          {"name": "body", "in": "body", "schema": {"type": "object", "properties": {"sender_jid": {"type": "string"}, "chat_jid": {"type": "string"}}}}
        ],
        "responses": {"200": {"description": "Message marked as read"}}
      }
    },
    "/messages/{message_id}/reaction": {
      "post": {
        "security": [{"BearerAuth": []}],
        "tags": ["07 - Message Actions"],
        "summary": "React to Message",
        "description": "Add emoji reaction. Send empty string to remove.",
        "consumes": ["application/json"],
        "parameters": [
          {"name": "message_id", "in": "path", "required": true, "type": "string"},
          {"name": "body", "in": "body", "schema": {"type": "object", "properties": {"emoji": {"type": "string", "example": "üëç"}}}}
        ],
        "responses": {"200": {"description": "Reaction added"}}
      }
    },
    "/messages/{message_id}": {
      "patch": {
        "security": [{"BearerAuth": []}],
        "tags": ["07 - Message Actions"],
        "summary": "Edit Message",
        "description": "Edit text message (within 15 minutes)",
        "consumes": ["application/json"],
        "parameters": [
          {"name": "message_id", "in": "path", "required": true, "type": "string"},
          {"name": "body", "in": "body", "schema": {"type": "object", "properties": {"text": {"type": "string"}, "chat_jid": {"type": "string"}}}}
        ],
        "responses": {"200": {"description": "Message edited"}}
      },
      "delete": {
        "security": [{"BearerAuth": []}],
        "tags": ["07 - Message Actions"],
        "summary": "Delete Message",
        "description": "Delete message for everyone",
        "parameters": [{"name": "message_id", "in": "path", "required": true, "type": "string"}],
        "responses": {"200": {"description": "Message deleted"}}
      }
    },
    "/messages/{message_id}/reply": {
      "post": {
        "security": [{"BearerAuth": []}],
        "tags": ["07 - Message Actions"],
        "summary": "Reply to Message",
        "consumes": ["application/json"],
        "parameters": [
          {"name": "message_id", "in": "path", "required": true, "type": "string"},
          {"name": "body", "in": "body", "schema": {"type": "object", "properties": {"chat_jid": {"type": "string"}, "text": {"type": "string"}}}}
        ],
        "responses": {"200": {"description": "Reply sent"}}
      }
    },
    "/groups": {
      "get": {
        "security": [{"BearerAuth": []}],
        "tags": ["08 - Group Management"],
        "summary": "List All Groups",
        "responses": {"200": {"description": "Groups retrieved"}}
      },
      "post": {
        "security": [{"BearerAuth": []}],
        "tags": ["08 - Group Management"],
        "summary": "Create Group",
        "consumes": ["application/json"],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "required": ["name"],
              "properties": {
                "name": {"type": "string", "example": "My Group"},
                "participants": {"type": "array", "items": {"type": "string"}, "example": ["6281234567890@s.whatsapp.net"]}
              }
            }
          }
        ],
        "responses": {"200": {"description": "Group created"}}
      }
    },
    "/groups/joined": {
      "get": {
        "security": [{"BearerAuth": []}],
        "tags": ["08 - Group Management"],
        "summary": "Get Joined Groups",
        "responses": {"200": {"description": "Joined groups retrieved"}}
      }
    },
    "/groups/{group_jid}": {
      "get": {
        "security": [{"BearerAuth": []}],
        "tags": ["08 - Group Management"],
        "summary": "Get Group Info",
        "parameters": [{"name": "group_jid", "in": "path", "required": true, "type": "string"}],
        "responses": {"200": {"description": "Group info retrieved"}}
      }
    },
    "/groups/{group_jid}/leave": {
      "post": {
        "security": [{"BearerAuth": []}],
        "tags": ["08 - Group Management"],
        "summary": "Leave Group",
        "parameters": [{"name": "group_jid", "in": "path", "required": true, "type": "string"}],
        "responses": {"200": {"description": "Left group"}}
      }
    },
    "/groups/{group_jid}/name": {
      "patch": {
        "security": [{"BearerAuth": []}],
        "tags": ["08 - Group Management"],
        "summary": "Update Group Name",
        "parameters": [
          {"name": "group_jid", "in": "path", "required": true, "type": "string"},
          {"name": "body", "in": "body", "schema": {"type": "object", "properties": {"name": {"type": "string"}}}}
        ],
        "responses": {"200": {"description": "Name updated"}}
      }
    },
    "/groups/{group_jid}/description": {
      "patch": {
        "security": [{"BearerAuth": []}],
        "tags": ["08 - Group Management"],
        "summary": "Update Group Description",
        "parameters": [
          {"name": "group_jid", "in": "path", "required": true, "type": "string"},
          {"name": "body", "in": "body", "schema": {"type": "object", "properties": {"description": {"type": "string"}}}}
        ],
        "responses": {"200": {"description": "Description updated"}}
      }
    },
    "/groups/{group_jid}/photo": {
      "post": {
        "security": [{"BearerAuth": []}],
        "tags": ["08 - Group Management"],
        "summary": "Update Group Photo",
        "consumes": ["multipart/form-data"],
        "parameters": [
          {"name": "group_jid", "in": "path", "required": true, "type": "string"},
          {"name": "photo", "in": "formData", "required": true, "type": "file"}
        ],
        "responses": {"200": {"description": "Photo updated"}}
      }
    },
    "/groups/{group_jid}/invite-link": {
      "get": {
        "security": [{"BearerAuth": []}],
        "tags": ["08 - Group Management"],
        "summary": "Get Invite Link",
        "parameters": [
          {"name": "group_jid", "in": "path", "required": true, "type": "string"},
          {"name": "reset", "in": "query", "type": "boolean", "default": false}
        ],
        "responses": {"200": {"description": "Invite link retrieved"}}
      }
    },
    "/groups/{group_jid}/settings": {
      "patch": {
        "security": [{"BearerAuth": []}],
        "tags": ["08 - Group Management"],
        "summary": "Update Group Settings",
        "parameters": [
          {"name": "group_jid", "in": "path", "required": true, "type": "string"},
          {"name": "body", "in": "body", "schema": {"type": "object", "properties": {"announce": {"type": "boolean"}, "locked": {"type": "boolean"}}}}
        ],
        "responses": {"200": {"description": "Settings updated"}}
      }
    },
    "/groups/{group_jid}/participants": {
      "post": {
        "security": [{"BearerAuth": []}],
        "tags": ["08 - Group Management"],
        "summary": "Add Participants",
        "parameters": [
          {"name": "group_jid", "in": "path", "required": true, "type": "string"},
          {"name": "body", "in": "body", "schema": {"type": "object", "properties": {"participants": {"type": "array", "items": {"type": "string"}}}}}
        ],
        "responses": {"200": {"description": "Participants added"}}
      },
      "delete": {
        "security": [{"BearerAuth": []}],
        "tags": ["08 - Group Management"],
        "summary": "Remove Participants",
        "parameters": [
          {"name": "group_jid", "in": "path", "required": true, "type": "string"},
          {"name": "body", "in": "body", "schema": {"type": "object", "properties": {"participants": {"type": "array", "items": {"type": "string"}}}}}
        ],
        "responses": {"200": {"description": "Participants removed"}}
      }
    },
    "/groups/{group_jid}/admins": {
      "post": {
        "security": [{"BearerAuth": []}],
        "tags": ["08 - Group Management"],
        "summary": "Promote to Admin",
        "parameters": [
          {"name": "group_jid", "in": "path", "required": true, "type": "string"},
          {"name": "body", "in": "body", "schema": {"type": "object", "properties": {"users": {"type": "array", "items": {"type": "string"}}}}}
        ],
        "responses": {"200": {"description": "Promoted"}}
      },
      "delete": {
        "security": [{"BearerAuth": []}],
        "tags": ["08 - Group Management"],
        "summary": "Demote from Admin",
        "parameters": [
          {"name": "group_jid", "in": "path", "required": true, "type": "string"},
          {"name": "body", "in": "body", "schema": {"type": "object", "properties": {"users": {"type": "array", "items": {"type": "string"}}}}}
        ],
        "responses": {"200": {"description": "Demoted"}}
      }
    },
    "/groups/{group_jid}/participant-requests": {
      "get": {
        "security": [{"BearerAuth": []}],
        "tags": ["08 - Group Management"],
        "summary": "Get Join Requests",
        "parameters": [{"name": "group_jid", "in": "path", "required": true, "type": "string"}],
        "responses": {"200": {"description": "Requests retrieved"}}
      }
    },
    "/groups/{group_jid}/requests/approve": {
      "post": {
        "security": [{"BearerAuth": []}],
        "tags": ["08 - Group Management"],
        "summary": "Approve Join Requests",
        "parameters": [
          {"name": "group_jid", "in": "path", "required": true, "type": "string"},
          {"name": "body", "in": "body", "schema": {"type": "object", "properties": {"users": {"type": "array", "items": {"type": "string"}}}}}
        ],
        "responses": {"200": {"description": "Approved"}}
      }
    },
    "/groups/{group_jid}/requests/reject": {
      "post": {
        "security": [{"BearerAuth": []}],
        "tags": ["08 - Group Management"],
        "summary": "Reject Join Requests",
        "parameters": [
          {"name": "group_jid", "in": "path", "required": true, "type": "string"},
          {"name": "body", "in": "body", "schema": {"type": "object", "properties": {"users": {"type": "array", "items": {"type": "string"}}}}}
        ],
        "responses": {"200": {"description": "Rejected"}}
      }
    },
    "/groups/{group_jid}/join-approval": {
      "post": {
        "security": [{"BearerAuth": []}],
        "tags": ["08 - Group Management"],
        "summary": "Set Join Approval Mode",
        "parameters": [
          {"name": "group_jid", "in": "path", "required": true, "type": "string"},
          {"name": "body", "in": "body", "schema": {"type": "object", "properties": {"mode": {"type": "boolean"}}}}
        ],
        "responses": {"200": {"description": "Mode set"}}
      }
    },
    "/groups/invite/{invite_code}": {
      "get": {
        "security": [{"BearerAuth": []}],
        "tags": ["08 - Group Management"],
        "summary": "Get Info from Invite Link",
        "parameters": [{"name": "invite_code", "in": "path", "required": true, "type": "string"}],
        "responses": {"200": {"description": "Group info from invite"}}
      }
    },
    "/groups/{group_jid}/join-invite": {
      "post": {
        "security": [{"BearerAuth": []}],
        "tags": ["08 - Group Management"],
        "summary": "Join via Invite",
        "parameters": [
          {"name": "group_jid", "in": "path", "required": true, "type": "string"},
          {"name": "body", "in": "body", "schema": {"type": "object", "properties": {"invite_code": {"type": "string"}}}}
        ],
        "responses": {"200": {"description": "Joined"}}
      }
    },
    "/groups/{group_jid}/member-add-mode": {
      "patch": {
        "security": [{"BearerAuth": []}],
        "tags": ["08 - Group Management"],
        "summary": "Set Member Add Mode",
        "parameters": [
          {"name": "group_jid", "in": "path", "required": true, "type": "string"},
          {"name": "body", "in": "body", "schema": {"type": "object", "properties": {"mode": {"type": "string"}}}}
        ],
        "responses": {"200": {"description": "Mode set"}}
      }
    },
    "/groups/{group_jid}/topic": {
      "patch": {
        "security": [{"BearerAuth": []}],
        "tags": ["08 - Group Management"],
        "summary": "Update Group Topic",
        "parameters": [
          {"name": "group_jid", "in": "path", "required": true, "type": "string"},
          {"name": "body", "in": "body", "schema": {"type": "object", "properties": {"topic": {"type": "string"}}}}
        ],
        "responses": {"200": {"description": "Topic updated"}}
      }
    },
    "/groups/{parent_group_jid}/link/{group_jid}": {
      "post": {
        "security": [{"BearerAuth": []}],
        "tags": ["08 - Group Management"],
        "summary": "Link Subgroup",
        "parameters": [
          {"name": "parent_group_jid", "in": "path", "required": true, "type": "string"},
          {"name": "group_jid", "in": "path", "required": true, "type": "string"}
        ],
        "responses": {"200": {"description": "Groups linked"}}
      }
    },
    "/groups/{community_jid}/linked-participants": {
      "get": {
        "security": [{"BearerAuth": []}],
        "tags": ["08 - Group Management"],
        "summary": "Get Community Members",
        "parameters": [{"name": "community_jid", "in": "path", "required": true, "type": "string"}],
        "responses": {"200": {"description": "Members retrieved"}}
      }
    },
    "/groups/{community_jid}/subgroups": {
      "get": {
        "security": [{"BearerAuth": []}],
        "tags": ["08 - Group Management"],
        "summary": "List Subgroups",
        "parameters": [{"name": "community_jid", "in": "path", "required": true, "type": "string"}],
        "responses": {"200": {"description": "Subgroups retrieved"}}
      }
    },
    "/chats/{chat_jid}/presence": {
      "post": {
        "security": [{"BearerAuth": []}],
        "tags": ["09 - Presence & Status"],
        "summary": "Send Typing/Recording Indicator",
        "consumes": ["application/json"],
        "parameters": [
          {"name": "chat_jid", "in": "path", "required": true, "type": "string"},
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "presence_type": {"type": "string", "enum": ["composing", "paused", "recording"]},
                "media_type": {"type": "string", "enum": ["audio", "video"]}
              }
            }
          }
        ],
        "responses": {"200": {"description": "Presence sent"}}
      }
    },
    "/presence/status": {
      "post": {
        "security": [{"BearerAuth": []}],
        "tags": ["09 - Presence & Status"],
        "summary": "Set Online/Offline Status",
        "consumes": ["application/json"],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "status": {"type": "string", "enum": ["available", "unavailable"]}
              }
            }
          }
        ],
        "responses": {"200": {"description": "Status updated"}}
      }
    },
    "/chats/{chat_jid}/disappearing-timer": {
      "patch": {
        "security": [{"BearerAuth": []}],
        "tags": ["09 - Presence & Status"],
        "summary": "Set Disappearing Messages Timer",
        "consumes": ["application/json"],
        "parameters": [
          {"name": "chat_jid", "in": "path", "required": true, "type": "string"},
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "timer": {"type": "string", "enum": ["off", "24h", "7d", "90d"]}
              }
            }
          }
        ],
        "responses": {"200": {"description": "Timer set"}}
      }
    },
    "/app-state/{name}": {
      "get": {
        "security": [{"BearerAuth": []}],
        "tags": ["10 - App State"],
        "summary": "Fetch App State",
        "parameters": [
          {"name": "name", "in": "path", "required": true, "type": "string"},
          {"name": "full_sync", "in": "query", "type": "boolean", "default": false},
          {"name": "only_if_not_synced", "in": "query", "type": "boolean", "default": false}
        ],
        "responses": {"200": {"description": "App state fetched"}}
      }
    },
    "/app-state": {
      "post": {
        "security": [{"BearerAuth": []}],
        "tags": ["10 - App State"],
        "summary": "Send App State Patch",
        "consumes": ["application/json"],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "name": {"type": "string"},
                "action": {"type": "string"},
                "data": {"type": "object"}
              }
            }
          }
        ],
        "responses": {"200": {"description": "Patch sent"}}
      }
    },
    "/app-state/mark-clean": {
      "post": {
        "security": [{"BearerAuth": []}],
        "tags": ["10 - App State"],
        "summary": "Mark App State as Clean",
        "consumes": ["application/json"],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "clean_type": {"type": "string"},
                "timestamp": {"type": "integer"}
              }
            }
          }
        ],
        "responses": {"200": {"description": "Marked as clean"}}
      }
    },
    "/webhooks": {
      "get": {
        "security": [{"BearerAuth": []}],
        "tags": ["11 - Webhooks"],
        "summary": "List Webhooks",
        "description": "Get all webhooks configured for the current device",
        "responses": {"200": {"description": "Webhooks retrieved"}}
      },
      "post": {
        "security": [{"BearerAuth": []}],
        "tags": ["11 - Webhooks"],
        "summary": "Create Webhook",
        "description": "Register a webhook to receive WhatsApp events",
        "consumes": ["application/json"],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "required": ["url"],
              "properties": {
                "url": {"type": "string", "example": "https://your-server.com/webhook"},
                "secret": {"type": "string", "description": "Secret for HMAC signature verification"},
                "events": {"type": "array", "items": {"type": "string"}, "example": ["message.received", "connection.connected"]}
              }
            }
          }
        ],
        "responses": {"201": {"description": "Webhook created"}}
      }
    },
    "/webhooks/{webhook_id}": {
      "get": {
        "security": [{"BearerAuth": []}],
        "tags": ["11 - Webhooks"],
        "summary": "Get Webhook Details",
        "parameters": [{"name": "webhook_id", "in": "path", "required": true, "type": "string"}],
        "responses": {"200": {"description": "Webhook details"}}
      },
      "patch": {
        "security": [{"BearerAuth": []}],
        "tags": ["11 - Webhooks"],
        "summary": "Update Webhook",
        "parameters": [
          {"name": "webhook_id", "in": "path", "required": true, "type": "string"},
          {"name": "body", "in": "body", "schema": {"type": "object", "properties": {"url": {"type": "string"}, "events": {"type": "array", "items": {"type": "string"}}, "active": {"type": "boolean"}}}}
        ],
        "responses": {"200": {"description": "Webhook updated"}}
      },
      "delete": {
        "security": [{"BearerAuth": []}],
        "tags": ["11 - Webhooks"],
        "summary": "Delete Webhook",
        "parameters": [{"name": "webhook_id", "in": "path", "required": true, "type": "string"}],
        "responses": {"200": {"description": "Webhook deleted"}}
      }
    },
    "/webhooks/{webhook_id}/logs": {
      "get": {
        "security": [{"BearerAuth": []}],
        "tags": ["11 - Webhooks"],
        "summary": "Get Webhook Logs",
        "parameters": [{"name": "webhook_id", "in": "path", "required": true, "type": "string"}],
        "responses": {"200": {"description": "Logs retrieved"}}
      }
    },
    "/webhooks/{webhook_id}/test": {
      "post": {
        "security": [{"BearerAuth": []}],
        "tags": ["11 - Webhooks"],
        "summary": "Test Webhook",
        "description": "Send a test event to the webhook",
        "parameters": [{"name": "webhook_id", "in": "path", "required": true, "type": "string"}],
        "responses": {"200": {"description": "Test event sent"}}
      }
    }
  }
}
